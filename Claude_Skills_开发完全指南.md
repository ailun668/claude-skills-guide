# Claude Skills å¼€å‘å®Œå…¨æŒ‡å—

> **ğŸ“– ä¸€ä»½è¯¦å°½çš„ Claude Skills å¼€å‘æ•™ç¨‹**  
> ä»é›¶å¼€å§‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»ºä¸“ä¸šçš„ Claude Skills

---

## ğŸ“‘ ç›®å½•

1. [ä»€ä¹ˆæ˜¯ Claude Skills](#1-ä»€ä¹ˆæ˜¯-claude-skills)
2. [æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„](#2-æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„)
3. [å¼€å‘ç¯å¢ƒå‡†å¤‡](#3-å¼€å‘ç¯å¢ƒå‡†å¤‡)
4. [Skill æ–‡ä»¶ç»“æ„è¯¦è§£](#4-skill-æ–‡ä»¶ç»“æ„è¯¦è§£)
5. [SKILL.md ç¼–å†™æŒ‡å—](#5-skillmd-ç¼–å†™æŒ‡å—)
6. [Scripts è„šæœ¬å¼€å‘](#6-scripts-è„šæœ¬å¼€å‘)
7. [Reference èµ„æºç»„ç»‡](#7-reference-èµ„æºç»„ç»‡)
8. [æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼](#8-æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼)
9. [æµ‹è¯•ä¸è°ƒè¯•](#9-æµ‹è¯•ä¸è°ƒè¯•)
10. [éƒ¨ç½²ä¸ä½¿ç”¨](#10-éƒ¨ç½²ä¸ä½¿ç”¨)
11. [å®Œæ•´ç¤ºä¾‹](#11-å®Œæ•´ç¤ºä¾‹)
12. [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#12-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)

---

## 1. ä»€ä¹ˆæ˜¯ Claude Skills

### 1.1 å®šä¹‰

**Claude Skills** æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„èƒ½åŠ›åŒ…ï¼ˆCapability Packageï¼‰ï¼Œå®ƒå°†ä¸“å®¶çš„éšæ€§çŸ¥è¯†ç³»ç»ŸåŒ–å°è£…ï¼Œä½¿ AI Agent èƒ½å¤Ÿæˆä¸ºçœŸæ­£çš„é¢†åŸŸä¸“å®¶ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼

- âœ… **çŸ¥è¯†å°è£…**ï¼šå°†é¢†åŸŸä¸“å®¶çš„ç»éªŒæ‰“åŒ…æˆå¯å¤ç”¨çš„æ¨¡å—
- âœ… **è‡ªåŠ¨å‘ç°**ï¼šClaude æ ¹æ®ä»»åŠ¡éœ€æ±‚è‡ªåŠ¨åŠ è½½ç›¸å…³ Skill
- âœ… **ä¸Šä¸‹æ–‡ä¼˜åŒ–**ï¼šæ¸è¿›å¼åŠ è½½ï¼Œåªåœ¨éœ€è¦æ—¶å ç”¨ token
- âœ… **è·¨å¹³å°é€šç”¨**ï¼šä¸€æ¬¡åˆ›å»ºï¼Œå¯åœ¨ APIã€Claude Codeã€claude.ai ä¸­ä½¿ç”¨

### 1.3 é€‚ç”¨åœºæ™¯

| åœºæ™¯ç±»å‹ | ç¤ºä¾‹ |
|---------|------|
| **æ–‡æ¡£ç”Ÿæˆ** | è´¢åŠ¡æŠ¥å‘Šã€PPT æ¼”ç¤ºã€åˆåŒæ¨¡æ¿ |
| **æ•°æ®åˆ†æ** | è´¢åŠ¡æ¯”ç‡è®¡ç®—ã€æ•°æ®å¯è§†åŒ–ã€ç»Ÿè®¡åˆ†æ |
| **ä¸šåŠ¡æµç¨‹** | å“ç‰Œè§„èŒƒåº”ç”¨ã€å®¡æ‰¹æµç¨‹ã€è´¨é‡æ£€æŸ¥ |
| **é¢†åŸŸä¸“ä¸š** | æ³•å¾‹æ–‡ä¹¦ã€åŒ»ç–—è¯Šæ–­è¾…åŠ©ã€å·¥ç¨‹è®¡ç®— |

---

## 2. æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„

### 2.1 ä¸‰å±‚ç»“æ„

æ¯ä¸ª Skill ç”±ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†æ„æˆï¼š

```
my-skill/
â”œâ”€â”€ SKILL.md          # ğŸ“‹ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰- ä¸“å®¶çš„è¡ŒåŠ¨å‰§æœ¬
â”œâ”€â”€ scripts/          # ğŸ”§ å·¥å…·ï¼ˆToolsï¼‰- ç¡®å®šæ€§çš„å¯é å‡½æ•°
â”‚   â””â”€â”€ processor.py
â””â”€â”€ reference/        # ğŸ“š èµ„æºï¼ˆResourcesï¼‰- API æ–‡æ¡£ã€é…ç½®æ–‡ä»¶
    â””â”€â”€ guide.md
```

#### **SOP (SKILL.md)**
- å›ºåŒ–ç¨‹åºæ€§çŸ¥è¯†
- æä¾›å·¥ä½œæµç¨‹å’Œæœ€ä½³å®è·µ
- å‘Šè¯‰ Claude "å¦‚ä½•åš"

#### **å·¥å…· (scripts/)**
- å°è£…æ“ä½œæ€§çŸ¥è¯†
- æä¾›ç¡®å®šæ€§çš„è®¡ç®—å’Œå¤„ç†
- é¿å… Claude é‡å¤ç”Ÿæˆä»£ç 

#### **èµ„æº (reference/)**
- ç²¾é€‰çŸ¥è¯†åº“
- API æ–‡æ¡£ã€é…ç½®æ–‡ä»¶ã€ç¤ºä¾‹æ•°æ®
- æä¾›å‚è€ƒä¿¡æ¯

### 2.2 æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰

è¿™æ˜¯ Skills æœ€é‡è¦çš„è®¾è®¡ç†å¿µï¼Œç¡®ä¿åªæœ‰ç›¸å…³å†…å®¹æ‰ä¼šå ç”¨ä¸Šä¸‹æ–‡çª—å£ã€‚

#### **ä¸‰ä¸ªåŠ è½½å±‚çº§**

| å±‚çº§ | å†…å®¹ | åŠ è½½æ—¶æœº | Token æ¶ˆè€— |
|------|------|----------|-----------|
| **Level 1** | `name` + `description` | å¯åŠ¨æ—¶å§‹ç»ˆåŠ è½½ | ~100 tokens/skill |
| **Level 2** | SKILL.md ä¸»ä½“å†…å®¹ | Skill è¢«è§¦å‘æ—¶ | ~5k tokens |
| **Level 3** | scripts + reference æ–‡ä»¶ | æŒ‰éœ€å¼•ç”¨æ—¶ | å‡ ä¹æ— é™åˆ¶ |

#### **å·¥ä½œåŸç†**

```mermaid
graph TD
    A[ç”¨æˆ·è¯·æ±‚] --> B{åŒ¹é… description?}
    B -->|å¦| C[ä¸åŠ è½½æ­¤ Skill]
    B -->|æ˜¯| D[åŠ è½½ SKILL.md]
    D --> E{éœ€è¦è„šæœ¬?}
    E -->|æ˜¯| F[æ‰§è¡Œ scripts/xxx.py]
    E -->|å¦| G[ç›´æ¥å¤„ç†]
    D --> H{éœ€è¦å‚è€ƒ?}
    H -->|æ˜¯| I[è¯»å– reference/xxx.md]
    H -->|å¦| G
```

### 2.3 è¿è¡Œæ—¶ç¯å¢ƒ

Skills è¿è¡Œåœ¨å…·æœ‰ä»¥ä¸‹èƒ½åŠ›çš„ä»£ç æ‰§è¡Œç¯å¢ƒä¸­ï¼š

- âœ… **æ–‡ä»¶ç³»ç»Ÿè®¿é—®**ï¼šå¯ä»¥è¯»å†™æ–‡ä»¶
- âœ… **Bash å‘½ä»¤**ï¼šå¯ä»¥æ‰§è¡Œ shell å‘½ä»¤
- âœ… **ä»£ç æ‰§è¡Œ**ï¼šå¯ä»¥è¿è¡Œ Pythonã€JavaScript ç­‰
- âœ… **åŒ…ç®¡ç†**ï¼šå¯ä»¥å®‰è£… npm å’Œ PyPI åŒ…ï¼ˆclaude.aiï¼‰
- âš ï¸ **æ— ç½‘ç»œè®¿é—®**ï¼ˆAPI ç¯å¢ƒï¼‰ï¼šæ— æ³•åœ¨è¿è¡Œæ—¶å®‰è£…åŒ…

---

## 3. å¼€å‘ç¯å¢ƒå‡†å¤‡

### 3.1 å¿…éœ€å·¥å…·

```bash
# 1. Python 3.8+
python --version

# 2. æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæ¨è VS Codeï¼‰
code --version

# 3. Gitï¼ˆç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼‰
git --version

# 4. Anthropic SDKï¼ˆç”¨äºæµ‹è¯•ï¼‰
pip install anthropic
```

### 3.2 é¡¹ç›®ç»“æ„æ¨¡æ¿

åˆ›å»ºæ ‡å‡†çš„å¼€å‘ç›®å½•ï¼š

```bash
mkdir my-skills-project
cd my-skills-project

# åˆ›å»ºæ ‡å‡†ç»“æ„
mkdir -p skills/{skill-name}/{scripts,reference}
touch skills/skill-name/SKILL.md
touch .env
touch test_skill.py
```

### 3.3 ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# .env
ANTHROPIC_API_KEY=your_api_key_here
```

åˆ›å»º `test_skill.py` æµ‹è¯•è„šæœ¬ï¼š

```python
import os
from anthropic import Anthropic
from dotenv import load_dotenv

load_dotenv()

client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))

# æµ‹è¯•ä»£ç å°†åœ¨åé¢æ·»åŠ 
```

---

## 4. Skill æ–‡ä»¶ç»“æ„è¯¦è§£

### 4.1 å®Œæ•´ç›®å½•ç»“æ„

```
my-skill/
â”œâ”€â”€ SKILL.md                    # å¿…éœ€ï¼šä¸»æŒ‡ä»¤æ–‡ä»¶
â”œâ”€â”€ scripts/                    # å¯é€‰ï¼šå¯æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ __init__.py            # Python åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ main_processor.py      # ä¸»å¤„ç†è„šæœ¬
â”‚   â”œâ”€â”€ validator.py           # éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ utils.py               # å·¥å…·å‡½æ•°
â”œâ”€â”€ reference/                  # å¯é€‰ï¼šå‚è€ƒèµ„æ–™
â”‚   â”œâ”€â”€ api_docs.md            # API æ–‡æ¡£
â”‚   â”œâ”€â”€ examples.md            # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ templates/             # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ report_template.xlsx
â”‚   â””â”€â”€ data/                  # ç¤ºä¾‹æ•°æ®
â”‚       â””â”€â”€ sample.json
â””â”€â”€ tests/                      # å¯é€‰ï¼šæµ‹è¯•æ–‡ä»¶
    â””â”€â”€ test_processor.py
```

### 4.2 æ–‡ä»¶å‘½åè§„èŒƒ

#### **Skill ç›®å½•å**
- âœ… ä½¿ç”¨å°å†™å­—æ¯
- âœ… ä½¿ç”¨è¿å­—ç¬¦åˆ†éš”å•è¯
- âœ… ä½¿ç”¨åŠ¨åè¯å½¢å¼ï¼ˆverb + -ingï¼‰
- âœ… æœ€å¤§ 64 å­—ç¬¦
- âŒ ä¸ä½¿ç”¨ä¸‹åˆ’çº¿ã€ç©ºæ ¼ã€å¤§å†™å­—æ¯

```bash
# å¥½çš„å‘½å
analyzing-financial-data
processing-legal-documents
generating-marketing-reports

# ä¸å¥½çš„å‘½å
Financial_Analysis
process documents
LEGAL-DOCS
```

#### **è„šæœ¬æ–‡ä»¶å**
- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- æè¿°æ€§å‘½åï¼Œè¡¨æ˜åŠŸèƒ½
- Python æ–‡ä»¶ä½¿ç”¨ `.py` æ‰©å±•å

```bash
# å¥½çš„å‘½å
calculate_ratios.py
validate_input.py
generate_report.py

# ä¸å¥½çš„å‘½å
script1.py
temp.py
utils.py  # å¤ªæ³›åŒ–
```

#### **å‚è€ƒæ–‡ä»¶å**
- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- Markdown æ–‡ä»¶ä½¿ç”¨ `.md` æ‰©å±•å
- æŒ‰ä¸»é¢˜ç»„ç»‡

```bash
# å¥½çš„å‘½å
api_reference.md
usage_examples.md
troubleshooting_guide.md
```

---

## 5. SKILL.md ç¼–å†™æŒ‡å—

### 5.1 YAML Frontmatterï¼ˆå¿…éœ€ï¼‰

SKILL.md æ–‡ä»¶**å¿…é¡»**ä»¥ YAML frontmatter å¼€å¤´ï¼š

```yaml
---
name: skill-name
description: ç®€æ´æè¿°è¿™ä¸ª Skill åšä»€ä¹ˆä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒ
---
```

#### **name å­—æ®µè§„èŒƒ**

| è§„åˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| é•¿åº¦ | æœ€å¤§ 64 å­—ç¬¦ | âœ… `analyzing-financial-statements` |
| å­—ç¬¦ | å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ | âŒ `Financial_Analysis` |
| æ ¼å¼ | åŠ¨åè¯å½¢å¼ | âœ… `processing-invoices` |
| ç¦æ­¢ | XML æ ‡ç­¾ã€ä¿ç•™å­— | âŒ `<skill>name</skill>` |

#### **description å­—æ®µè§„èŒƒ**

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| é•¿åº¦ | æœ€å¤§ 1024 å­—ç¬¦ |
| å†…å®¹ | å¿…é¡»åŒ…å«"åšä»€ä¹ˆ"å’Œ"ä½•æ—¶ç”¨" |
| è¯­æ°” | ä½¿ç”¨ç¬¬ä¸‰äººç§° |
| å…³é”®è¯ | åŒ…å«è§¦å‘è¯ï¼Œä¾¿äº Claude åŒ¹é… |

**å¥½çš„ description ç¤ºä¾‹**ï¼š

```yaml
description: Calculates financial ratios (ROE, ROA, P/E, etc.) from financial statements and provides industry benchmark comparisons. Use when analyzing company performance, evaluating investments, or comparing financial metrics.
```

**ä¸å¥½çš„ description ç¤ºä¾‹**ï¼š

```yaml
# âŒ å¤ªç®€çŸ­ï¼Œç¼ºå°‘è§¦å‘åœºæ™¯
description: Financial analysis tool

# âŒ å¤ªæ³›åŒ–ï¼Œæ²¡æœ‰å…·ä½“åŠŸèƒ½
description: Helps with finance stuff

# âŒ ä½¿ç”¨ç¬¬ä¸€äººç§°
description: I can help you analyze financial data
```

### 5.2 ä¸»ä½“å†…å®¹ç»“æ„

SKILL.md ä¸»ä½“åº”è¯¥éµå¾ªæ¸…æ™°çš„ç»“æ„ï¼š

```markdown
---
name: your-skill-name
description: Your skill description
---

# Skill Title

Brief overview of what this skill does (1-2 sentences).

## Capabilities

List what this skill can do:
- Capability 1
- Capability 2
- Capability 3

## How to Use

Step-by-step instructions:
1. Step 1
2. Step 2
3. Step 3

## Input Format

Describe expected input:
- Format 1: Description
- Format 2: Description

## Output Format

Describe what will be produced:
- Output 1: Description
- Output 2: Description

## Example Usage

Provide concrete examples:
"Example request 1"
"Example request 2"

## Scripts (if applicable)

- `script1.py`: Description
- `script2.py`: Description

## Best Practices

1. Practice 1
2. Practice 2

## Limitations

- Limitation 1
- Limitation 2
```

### 5.3 å†…å®¹ç¼–å†™åŸåˆ™

#### **åŸåˆ™ 1ï¼šç®€æ´ä¸ºç‹**

ä¸Šä¸‹æ–‡æ˜¯å…¬å…±èµ„æºï¼Œæ¯ä¸ª token éƒ½å¾ˆå®è´µã€‚

**âŒ å†—é•¿ç‰ˆæœ¬ï¼ˆ~150 tokensï¼‰**ï¼š
```markdown
## Extract PDF Text

PDF (Portable Document Format) files are a common file format that contains
text, images, and other content. To extract text from a PDF, you'll need to
use a library. There are many libraries available for PDF processing, but we
recommend pdfplumber because it's easy to use and handles most cases well.
First, you'll need to install it using pip. Then you can use the code below...
```

**âœ… ç®€æ´ç‰ˆæœ¬ï¼ˆ~50 tokensï¼‰**ï¼š
```markdown
## Extract PDF Text

Use pdfplumber for text extraction:

```python
import pdfplumber
with pdfplumber.open("file.pdf") as pdf:
    text = pdf.pages[0].extract_text()
```
```

#### **åŸåˆ™ 2ï¼šåªæ•™ Claude ä¸çŸ¥é“çš„**

Claude å·²ç»å¾ˆèªæ˜ï¼Œä¸è¦è§£é‡ŠåŸºç¡€æ¦‚å¿µã€‚

**âŒ è¿‡åº¦è§£é‡Š**ï¼š
```markdown
Python is a programming language. A function is a reusable block of code.
To define a function, use the `def` keyword...
```

**âœ… ç›´æ¥ç»™å‡ºé¢†åŸŸçŸ¥è¯†**ï¼š
```markdown
Calculate financial ratios using this formula:
ROE = Net Income / Shareholders' Equity
```

#### **åŸåˆ™ 3ï¼šä½¿ç”¨å…·ä½“ç¤ºä¾‹**

æŠ½è±¡çš„æè¿°ä¸å¦‚å…·ä½“çš„ä¾‹å­ã€‚

**âŒ æŠ½è±¡æè¿°**ï¼š
```markdown
This skill can process various types of data and generate appropriate outputs.
```

**âœ… å…·ä½“ç¤ºä¾‹**ï¼š
```markdown
## Example Usage

"Calculate the P/E ratio if stock price is $50 and EPS is $2.50"
â†’ Output: P/E Ratio = 20.0

"Analyze liquidity using current assets $500K and current liabilities $300K"
â†’ Output: Current Ratio = 1.67 (Healthy liquidity position)
```

### 5.4 è®¾å®šé€‚å½“çš„è‡ªç”±åº¦

æ ¹æ®ä»»åŠ¡çš„è„†å¼±æ€§å’Œå¯å˜æ€§ï¼Œè®¾å®šä¸åŒçš„æŒ‡ä»¤ä¸¥æ ¼ç¨‹åº¦ã€‚

#### **é«˜è‡ªç”±åº¦ï¼ˆæ–‡æœ¬æŒ‡ä»¤ï¼‰**

é€‚ç”¨äºï¼šå¤šç§æ–¹æ³•éƒ½æœ‰æ•ˆã€éœ€è¦æ ¹æ®ä¸Šä¸‹æ–‡å†³ç­–çš„ä»»åŠ¡

```markdown
## Code Review Process

1. Analyze the code structure and organization
2. Check for potential bugs or edge cases
3. Suggest improvements for readability and maintainability
4. Verify adherence to project conventions
```

#### **ä¸­ç­‰è‡ªç”±åº¦ï¼ˆä¼ªä»£ç /å‚æ•°åŒ–è„šæœ¬ï¼‰**

é€‚ç”¨äºï¼šæœ‰é¦–é€‰æ¨¡å¼ä½†å…è®¸å˜åŒ–çš„ä»»åŠ¡

```markdown
## Generate Report

Use this template and customize as needed:

```python
def generate_report(data, format="markdown", include_charts=True):
    # Process data
    # Generate output in specified format
    # Optionally include visualizations
```
```

#### **ä½è‡ªç”±åº¦ï¼ˆç²¾ç¡®è„šæœ¬ï¼‰**

é€‚ç”¨äºï¼šæ“ä½œè„†å¼±ã€ä¸€è‡´æ€§å…³é”®çš„ä»»åŠ¡

```markdown
## Database Migration

Run exactly this script:

```bash
python scripts/migrate.py --verify --backup
```

âš ï¸ Do not modify the command or add additional flags.
```

### 5.5 å·¥ä½œæµä¸åé¦ˆå¾ªç¯

å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œæä¾›æ¸…æ™°çš„æ­¥éª¤å’ŒéªŒè¯æœºåˆ¶ã€‚

```markdown
## PDF Form Filling Workflow

### Steps:
- [ ] Step 1: Analyze form structure with `analyze_form.py`
- [ ] Step 2: Create `changes.json` with proposed updates
- [ ] Step 3: Validate with `validate_changes.py`
- [ ] Step 4: If validation fails, return to step 2
- [ ] Step 5: Apply changes with `fill_form.py`
- [ ] Step 6: Verify output with visual inspection

### Feedback Loop

Execute â†’ Validate â†’ Fix â†’ Repeat until validation passes
```

---

## 6. Scripts è„šæœ¬å¼€å‘

### 6.1 ä½•æ—¶ä½¿ç”¨è„šæœ¬

| åœºæ™¯ | ä½¿ç”¨è„šæœ¬ | ä½¿ç”¨æŒ‡ä»¤ |
|------|---------|---------|
| ç¡®å®šæ€§è®¡ç®— | âœ… | âŒ |
| å¤æ‚ç®—æ³• | âœ… | âŒ |
| æ•°æ®éªŒè¯ | âœ… | âŒ |
| æ–‡ä»¶å¤„ç† | âœ… | âŒ |
| çµæ´»åˆ¤æ–­ | âŒ | âœ… |
| è‡ªç„¶è¯­è¨€ç”Ÿæˆ | âŒ | âœ… |

### 6.2 è„šæœ¬ç¼–å†™è§„èŒƒ

#### **æ ‡å‡† Python è„šæœ¬æ¨¡æ¿**

```python
#!/usr/bin/env python3
"""
Script Name: calculate_ratios.py
Description: Calculate financial ratios from financial statement data
Author: Your Name
Date: 2025-01-XX
"""

import sys
import json
from typing import Dict, Any, Optional


def calculate_roe(net_income: float, shareholders_equity: float) -> float:
    """
    Calculate Return on Equity (ROE).
    
    Args:
        net_income: Net income for the period
        shareholders_equity: Total shareholders' equity
        
    Returns:
        ROE as a decimal (e.g., 0.15 for 15%)
        
    Raises:
        ValueError: If shareholders_equity is zero or negative
    """
    if shareholders_equity <= 0:
        raise ValueError("Shareholders' equity must be positive")
    
    return net_income / shareholders_equity


def main():
    """Main execution function."""
    try:
        # Read input from stdin (JSON format)
        input_data = json.loads(sys.stdin.read())
        
        # Validate required fields
        required_fields = ['net_income', 'shareholders_equity']
        for field in required_fields:
            if field not in input_data:
                raise ValueError(f"Missing required field: {field}")
        
        # Perform calculation
        roe = calculate_roe(
            input_data['net_income'],
            input_data['shareholders_equity']
        )
        
        # Output result as JSON
        result = {
            'roe': round(roe, 4),
            'roe_percentage': round(roe * 100, 2),
            'status': 'success'
        }
        
        print(json.dumps(result, indent=2))
        
    except ValueError as e:
        error_result = {
            'status': 'error',
            'error_type': 'ValueError',
            'message': str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)
        
    except Exception as e:
        error_result = {
            'status': 'error',
            'error_type': type(e).__name__,
            'message': str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)


if __name__ == "__main__":
    main()
```

#### **è„šæœ¬æœ€ä½³å®è·µ**

1. **æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²**
   ```python
   def function_name(param1: type, param2: type) -> return_type:
       """
       Brief description.
       
       Args:
           param1: Description
           param2: Description
           
       Returns:
           Description of return value
           
       Raises:
           ExceptionType: When this exception is raised
       """
   ```

2. **å®Œå–„çš„é”™è¯¯å¤„ç†**
   ```python
   try:
       result = risky_operation()
   except SpecificError as e:
       # Handle specific error
       log_error(e)
       return default_value
   except Exception as e:
       # Handle unexpected errors
       log_error(f"Unexpected error: {e}")
       raise
   ```

3. **è¾“å…¥éªŒè¯**
   ```python
   def validate_input(data: Dict[str, Any]) -> None:
       """Validate input data structure and values."""
       required_fields = ['field1', 'field2']
       
       for field in required_fields:
           if field not in data:
               raise ValueError(f"Missing required field: {field}")
       
       if data['field1'] < 0:
           raise ValueError("field1 must be non-negative")
   ```

4. **JSON è¾“å…¥/è¾“å‡º**
   ```python
   # Input
   input_data = json.loads(sys.stdin.read())
   
   # Output
   result = {'key': 'value'}
   print(json.dumps(result, indent=2))
   ```

### 6.3 åœ¨ SKILL.md ä¸­å¼•ç”¨è„šæœ¬

```markdown
## Scripts

### calculate_ratios.py

Calculates financial ratios from statement data.

**Usage:**
```bash
echo '{"net_income": 1000000, "shareholders_equity": 5000000}' | python scripts/calculate_ratios.py
```

**Input Format:**
```json
{
  "net_income": 1000000,
  "shareholders_equity": 5000000
}
```

**Output Format:**
```json
{
  "roe": 0.2,
  "roe_percentage": 20.0,
  "status": "success"
}
```
```

---

## 7. Reference èµ„æºç»„ç»‡

### 7.1 ä½•æ—¶ä½¿ç”¨ Reference

Reference æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ï¼š

- âœ… **API æ–‡æ¡£**ï¼šç¬¬ä¸‰æ–¹ API çš„å‚è€ƒæ–‡æ¡£
- âœ… **é…ç½®æ¨¡æ¿**ï¼šæ ‡å‡†é…ç½®æ–‡ä»¶ç¤ºä¾‹
- âœ… **ç¤ºä¾‹æ•°æ®**ï¼šç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºçš„æ•°æ®é›†
- âœ… **è¯¦ç»†æŒ‡å—**ï¼šè¿‡é•¿çš„æŠ€æœ¯æ–‡æ¡£ï¼ˆé¿å… SKILL.md è¿‡é•¿ï¼‰
- âœ… **æ¨¡æ¿æ–‡ä»¶**ï¼šExcelã€Wordã€PPT ç­‰æ¨¡æ¿

### 7.2 Reference æ–‡ä»¶ç»„ç»‡

```
reference/
â”œâ”€â”€ API_REFERENCE.md          # API æ–‡æ¡£
â”œâ”€â”€ EXAMPLES.md               # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ TROUBLESHOOTING.md        # æ•…éšœæ’é™¤
â”œâ”€â”€ templates/                # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ report_template.xlsx
â”‚   â”œâ”€â”€ presentation.pptx
â”‚   â””â”€â”€ contract_template.docx
â”œâ”€â”€ data/                     # ç¤ºä¾‹æ•°æ®
â”‚   â”œâ”€â”€ sample_input.json
â”‚   â””â”€â”€ test_data.csv
â””â”€â”€ configs/                  # é…ç½®æ–‡ä»¶
    â””â”€â”€ default_config.yaml
```

### 7.3 Reference æ–‡æ¡£ç¼–å†™

#### **API_REFERENCE.md ç¤ºä¾‹**

```markdown
# Financial Data API Reference

## Authentication

All requests require an API key in the header:
```
Authorization: Bearer YOUR_API_KEY
```

## Endpoints

### GET /api/v1/financials/{ticker}

Retrieve financial statements for a company.

**Parameters:**
- `ticker` (string, required): Stock ticker symbol
- `period` (string, optional): 'annual' or 'quarterly' (default: 'annual')
- `limit` (integer, optional): Number of periods to return (default: 5)

**Response:**
```json
{
  "ticker": "AAPL",
  "period": "annual",
  "statements": [
    {
      "fiscal_year": 2023,
      "revenue": 394328000000,
      "net_income": 96995000000,
      "total_assets": 352755000000
    }
  ]
}
```

**Error Codes:**
- 400: Invalid ticker symbol
- 401: Invalid API key
- 404: No data found
- 429: Rate limit exceeded
```

#### **EXAMPLES.md ç¤ºä¾‹**

```markdown
# Usage Examples

## Example 1: Basic Financial Ratio Analysis

**User Request:**
"Calculate the ROE for Apple based on their latest annual report"

**Expected Workflow:**
1. Extract net income and shareholders' equity from data
2. Run `calculate_ratios.py` with the data
3. Format and present the result

**Sample Output:**
```
Apple Inc. (AAPL) - FY 2023
Return on Equity (ROE): 147.4%

Interpretation: Exceptional profitability. Apple generates $1.47
in profit for every $1 of shareholder equity.
```

## Example 2: Multi-Company Comparison

**User Request:**
"Compare the P/E ratios of Apple, Microsoft, and Google"

**Expected Workflow:**
1. Gather stock prices and EPS for all three companies
2. Calculate P/E ratios
3. Create comparison table
4. Generate Excel chart

**Sample Output:**
| Company | Stock Price | EPS | P/E Ratio |
|---------|-------------|-----|-----------|
| Apple   | $185.00     | $6.13 | 30.2    |
| Microsoft | $370.00   | $11.05 | 33.5   |
| Google  | $140.00     | $5.80 | 24.1    |
```

### 7.4 åœ¨ SKILL.md ä¸­å¼•ç”¨ Reference

ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨ reference æ–‡ä»¶ï¼š

```markdown
## Detailed Documentation

For complete API documentation, see [API_REFERENCE.md](reference/API_REFERENCE.md).

For more examples, see [EXAMPLES.md](reference/EXAMPLES.md).

## Templates

Use the Excel template for standardized reports:
- Template location: `reference/templates/report_template.xlsx`
- Includes pre-formatted sheets for income statement, balance sheet, and ratios
```

---

## 8. æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼

### 8.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

#### **1. ç®€æ´ä¸ºç‹ï¼ˆConcise is Keyï¼‰**

**é—®é¢˜**ï¼šä¸Šä¸‹æ–‡çª—å£æ˜¯æœ‰é™çš„å…¬å…±èµ„æº

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åªåŒ…å« Claude ä¸çŸ¥é“çš„ä¿¡æ¯
- åˆ é™¤å†—ä½™è§£é‡Šå’ŒåŸºç¡€çŸ¥è¯†
- ä½¿ç”¨ç®€æ´çš„è¯­è¨€å’Œæ ¼å¼

**ç¤ºä¾‹å¯¹æ¯”**ï¼š

âŒ **å†—é•¿ç‰ˆæœ¬ï¼ˆ200+ tokensï¼‰**ï¼š
```markdown
## Introduction to Financial Ratios

Financial ratios are mathematical calculations that use data from a company's
financial statements to evaluate various aspects of its performance. These
ratios are important tools for investors, analysts, and managers. There are
many different types of ratios, including profitability ratios, liquidity
ratios, and leverage ratios. Each type serves a different purpose...
```

âœ… **ç®€æ´ç‰ˆæœ¬ï¼ˆ50 tokensï¼‰**ï¼š
```markdown
## Financial Ratios

Calculate key metrics:
- Profitability: ROE, ROA, margins
- Liquidity: Current ratio, quick ratio
- Leverage: Debt-to-equity, interest coverage
```

#### **2. æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰**

**é—®é¢˜**ï¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ä¿¡æ¯æµªè´¹ tokens

**è§£å†³æ–¹æ¡ˆ**ï¼š
- Level 1: ç²¾å‡†çš„ description ç”¨äºåŒ¹é…
- Level 2: SKILL.md æä¾›æ ¸å¿ƒæŒ‡ä»¤
- Level 3: è¯¦ç»†æ–‡æ¡£æ”¾åœ¨ reference/

**å®è·µ**ï¼š

```markdown
# SKILL.md (Level 2 - æ ¸å¿ƒæŒ‡ä»¤)
---
name: analyzing-financial-statements
description: Calculate financial ratios from statements. Use when analyzing company performance or investment decisions.
---

# Financial Analysis

## Quick Start
Use `calculate_ratios.py` for standard ratio calculations.

For detailed formulas and interpretations, see [FORMULAS.md](reference/FORMULAS.md).

# reference/FORMULAS.md (Level 3 - è¯¦ç»†æ–‡æ¡£)
## Detailed Ratio Formulas

### Return on Equity (ROE)
Formula: Net Income / Shareholders' Equity
Interpretation: Measures profitability relative to equity
Industry benchmarks:
- Technology: 15-25%
- Retail: 10-15%
- Utilities: 8-12%
...
```

#### **3. é€‚åº¦è‡ªç”±ï¼ˆAppropriate Degrees of Freedomï¼‰**

æ ¹æ®ä»»åŠ¡ç‰¹æ€§è®¾å®šæŒ‡ä»¤çš„ä¸¥æ ¼ç¨‹åº¦ï¼š

| ä»»åŠ¡è„†å¼±æ€§ | è‡ªç”±åº¦ | æŒ‡ä»¤ç±»å‹ | ç¤ºä¾‹ |
|-----------|--------|---------|------|
| **ä½** | é«˜ | æ–‡æœ¬æŒ‡å¯¼ | "Review code for best practices" |
| **ä¸­** | ä¸­ | ä¼ªä»£ç /æ¨¡æ¿ | "Use this template and customize" |
| **é«˜** | ä½ | ç²¾ç¡®è„šæœ¬ | "Run exactly: `python migrate.py`" |

#### **4. å…¨æ¨¡å‹æµ‹è¯•ï¼ˆTest Across Modelsï¼‰**

ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„èƒ½åŠ›æ°´å¹³ï¼š

| æ¨¡å‹ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| **Haiku** | å¿«é€Ÿã€ç»æµ | ç®€å•ä»»åŠ¡ã€é«˜é¢‘è°ƒç”¨ |
| **Sonnet** | å¹³è¡¡æ€§èƒ½ | å¤§å¤šæ•°ç”Ÿäº§åœºæ™¯ |
| **Opus** | æœ€å¼ºèƒ½åŠ› | å¤æ‚æ¨ç†ã€å…³é”®ä»»åŠ¡ |

**æµ‹è¯•ç­–ç•¥**ï¼š
```python
# åœ¨æ‰€æœ‰æ¨¡å‹ä¸Šæµ‹è¯•ä½ çš„ Skill
models = [
    "claude-haiku-4-20250514",
    "claude-sonnet-4-5-20250929",
    "claude-opus-4-20250514"
]

for model in models:
    response = client.messages.create(
        model=model,
        # ... å…¶ä»–å‚æ•°
    )
    # éªŒè¯è¾“å‡ºè´¨é‡
```

### 8.2 å¸¸è§è®¾è®¡æ¨¡å¼

#### **æ¨¡å¼ 1ï¼šå·¥ä½œæµæ¨¡å¼ï¼ˆWorkflow Patternï¼‰**

é€‚ç”¨äºå¤šæ­¥éª¤ã€éœ€è¦éªŒè¯çš„ä»»åŠ¡ã€‚

```markdown
## Document Processing Workflow

### Phase 1: Preparation
- [ ] Validate input file format
- [ ] Check file size and permissions
- [ ] Create backup copy

### Phase 2: Processing
- [ ] Extract text content
- [ ] Parse structured data
- [ ] Apply transformations

### Phase 3: Validation
- [ ] Run `validate_output.py`
- [ ] If validation fails, return to Phase 2
- [ ] If validation passes, proceed to Phase 4

### Phase 4: Finalization
- [ ] Generate final output
- [ ] Create summary report
- [ ] Clean up temporary files

**Feedback Loop**: Execute â†’ Validate â†’ Fix â†’ Repeat
```

#### **æ¨¡å¼ 2ï¼šå†³ç­–æ ‘æ¨¡å¼ï¼ˆDecision Tree Patternï¼‰**

é€‚ç”¨äºéœ€è¦æ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒè·¯å¾„çš„ä»»åŠ¡ã€‚

```markdown
## Data Processing Decision Tree

1. Check input format:
   - If CSV â†’ Use `process_csv.py`
   - If JSON â†’ Use `process_json.py`
   - If Excel â†’ Use `process_excel.py`
   - If other â†’ Convert to CSV first

2. Check data size:
   - If < 1000 rows â†’ Process in memory
   - If 1000-100K rows â†’ Use chunked processing
   - If > 100K rows â†’ Use streaming mode

3. Check data quality:
   - If missing values > 10% â†’ Run `clean_data.py` first
   - If duplicates found â†’ Run `deduplicate.py`
   - If outliers detected â†’ Ask user for handling strategy
```

#### **æ¨¡å¼ 3ï¼šæ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰**

é€‚ç”¨äºéœ€è¦ä¸€è‡´æ ¼å¼è¾“å‡ºçš„ä»»åŠ¡ã€‚

```markdown
## Report Generation Template

Use this structure for all financial reports:

### 1. Executive Summary
- Key findings (3-5 bullet points)
- Critical metrics
- Recommendations

### 2. Detailed Analysis
- Financial performance
- Ratio analysis
- Trend analysis

### 3. Supporting Data
- Tables with source data
- Charts and visualizations
- Calculation details

### 4. Appendix
- Methodology
- Assumptions
- Data sources

**Output Format**: Excel workbook with separate sheets for each section
```

#### **æ¨¡å¼ 4ï¼šéªŒè¯æ¨¡å¼ï¼ˆValidation Patternï¼‰**

é€‚ç”¨äºéœ€è¦ç¡®ä¿è¾“å‡ºè´¨é‡çš„ä»»åŠ¡ã€‚

```markdown
## Output Validation Checklist

Before finalizing output, verify:

### Data Integrity
- [ ] All required fields are present
- [ ] No null values in critical columns
- [ ] Data types are correct
- [ ] Ranges are within expected bounds

### Calculations
- [ ] Formulas are correct
- [ ] Totals match sum of components
- [ ] Percentages add up to 100%
- [ ] Cross-checks pass

### Formatting
- [ ] Numbers formatted consistently
- [ ] Dates in standard format
- [ ] Currency symbols correct
- [ ] Alignment is proper

### Quality
- [ ] No spelling errors
- [ ] Professional appearance
- [ ] Brand guidelines followed
- [ ] File naming convention correct

**Validation Script**: Run `python scripts/validate.py output.xlsx`
```

### 8.3 åæ¨¡å¼ï¼ˆAnti-Patternsï¼‰

é¿å…è¿™äº›å¸¸è§é”™è¯¯ï¼š

#### **âŒ åæ¨¡å¼ 1ï¼šè¿‡åº¦è§£é‡ŠåŸºç¡€çŸ¥è¯†**

```markdown
# ä¸è¦è¿™æ ·åš
Python is a programming language. To use Python, you need to install it.
A variable is a container for storing data. To create a variable, you use
the assignment operator (=). For example: x = 5 assigns the value 5 to x.
```

```markdown
# åº”è¯¥è¿™æ ·åš
Use Python 3.8+ with these dependencies:
- pandas >= 1.5.0
- numpy >= 1.23.0
```

#### **âŒ åæ¨¡å¼ 2ï¼šåŒ…å«æ—¶æ•ˆæ€§ä¿¡æ¯**

```markdown
# ä¸è¦è¿™æ ·åš
As of January 2024, the latest version is 2.5.0.
The current interest rate is 5.25%.
```

```markdown
# åº”è¯¥è¿™æ ·åš
Check the latest version at: https://example.com/releases
Use current market interest rates from your data source.
```

#### **âŒ åæ¨¡å¼ 3ï¼šä½¿ç”¨ Windows è·¯å¾„æ ¼å¼**

```markdown
# ä¸è¦è¿™æ ·åš
reference\templates\report.xlsx
scripts\process.py
```

```markdown
# åº”è¯¥è¿™æ ·åš
reference/templates/report.xlsx
scripts/process.py
```

#### **âŒ åæ¨¡å¼ 4ï¼šç¼ºå°‘å…·ä½“ç¤ºä¾‹**

```markdown
# ä¸è¦è¿™æ ·åš
This skill can handle various types of financial analysis tasks.
```

```markdown
# åº”è¯¥è¿™æ ·åš
## Example Usage

"Calculate ROE for Apple using Q4 2023 data"
"Compare P/E ratios of FAANG stocks"
"Generate a financial dashboard from this CSV"
```

#### **âŒ åæ¨¡å¼ 5ï¼šSKILL.md è¿‡é•¿**

```markdown
# ä¸è¦è¿™æ ·åš
# SKILL.md (1000+ lines)
åŒ…å«æ‰€æœ‰è¯¦ç»†æ–‡æ¡£ã€API å‚è€ƒã€ç¤ºä¾‹ã€æ•…éšœæ’é™¤...
```

```markdown
# åº”è¯¥è¿™æ ·åš
# SKILL.md (< 500 lines)
æ ¸å¿ƒæŒ‡ä»¤å’Œå¿«é€Ÿå¼€å§‹

# reference/DETAILED_GUIDE.md
è¯¦ç»†æ–‡æ¡£å’Œé«˜çº§ç”¨æ³•
```

### 8.4 æ€§èƒ½ä¼˜åŒ–æŠ€å·§

#### **1. ä¼˜åŒ– description ä»¥æé«˜åŒ¹é…å‡†ç¡®æ€§**

```yaml
# âŒ å¤ªæ³›åŒ–ï¼Œä¼šè¢«è¿‡åº¦è§¦å‘
description: Helps with data analysis

# âœ… ç²¾å‡†ï¼Œåªåœ¨ç›¸å…³æ—¶è§¦å‘
description: Calculates financial ratios (ROE, ROA, P/E, etc.) from income statements and balance sheets. Use when analyzing company financial performance or comparing investment opportunities.
```

#### **2. ä½¿ç”¨è„šæœ¬å‡å°‘ token æ¶ˆè€—**

```markdown
# âŒ è®© Claude æ¯æ¬¡éƒ½ç”Ÿæˆä»£ç 
## Calculate Financial Ratios
Write Python code to calculate ROE, ROA, and other ratios...

# âœ… ä½¿ç”¨é¢„å†™è„šæœ¬
## Calculate Financial Ratios
Run: `python scripts/calculate_ratios.py --input data.json`
```

#### **3. åˆ†å±‚ç»„ç»‡å¤æ‚ä¿¡æ¯**

```markdown
# Level 2 (SKILL.md) - ç®€æ´æŒ‡ä»¤
## API Integration
Use the Financial Data API to fetch company data.
See [API_REFERENCE.md](reference/API_REFERENCE.md) for details.

# Level 3 (reference/API_REFERENCE.md) - è¯¦ç»†æ–‡æ¡£
## Complete API Documentation
### Authentication
### Endpoints
### Rate Limits
### Error Handling
...
```

---

## 9. æµ‹è¯•ä¸è°ƒè¯•

### 9.1 æœ¬åœ°æµ‹è¯•ç¯å¢ƒ

#### **è®¾ç½®æµ‹è¯•è„šæœ¬**

åˆ›å»º `test_skill.py`ï¼š

```python
#!/usr/bin/env python3
"""
Test script for Claude Skills
"""

import os
import json
from anthropic import Anthropic
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# Initialize client
client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))

def test_skill(skill_path: str, user_message: str, model: str = "claude-sonnet-4-5-20250929"):
    """
    Test a skill with a user message.

    Args:
        skill_path: Path to the skill directory
        user_message: Test message to send
        model: Claude model to use
    """
    print(f"\n{'='*60}")
    print(f"Testing Skill: {skill_path}")
    print(f"Model: {model}")
    print(f"Message: {user_message}")
    print(f"{'='*60}\n")

    try:
        response = client.beta.messages.create(
            model=model,
            max_tokens=4096,
            betas=["code-execution-2025-08-25", "skills-2025-10-02"],
            container={
                "skills": [{
                    "type": "local",
                    "path": skill_path
                }]
            },
            tools=[{
                "type": "code_execution_20250825",
                "name": "code_execution"
            }],
            messages=[{
                "role": "user",
                "content": user_message
            }]
        )

        # Print response
        print("Response:")
        for block in response.content:
            if hasattr(block, 'text'):
                print(block.text)
            elif block.type == "tool_use":
                print(f"\n[Tool Use: {block.name}]")
                if hasattr(block, 'input'):
                    print(json.dumps(block.input, indent=2))

        print(f"\n{'='*60}")
        print(f"Tokens used: {response.usage.input_tokens} input, {response.usage.output_tokens} output")
        print(f"{'='*60}\n")

        return response

    except Exception as e:
        print(f"Error: {e}")
        raise


def test_suite():
    """Run a suite of tests for your skill."""

    skill_path = "skills/analyzing-financial-statements"

    # Test 1: Basic calculation
    test_skill(
        skill_path,
        "Calculate ROE if net income is $1,000,000 and shareholders' equity is $5,000,000"
    )

    # Test 2: Multiple ratios
    test_skill(
        skill_path,
        "Calculate ROE, ROA, and profit margin for a company with: net income $2M, total assets $10M, shareholders' equity $6M, revenue $20M"
    )

    # Test 3: Error handling
    test_skill(
        skill_path,
        "Calculate ROE with negative equity"
    )


if __name__ == "__main__":
    # Run single test
    test_skill(
        "skills/my-skill",
        "Your test message here"
    )

    # Or run full test suite
    # test_suite()
```

### 9.2 è°ƒè¯•æŠ€å·§

#### **1. æ£€æŸ¥ Skill æ˜¯å¦è¢«åŠ è½½**

åœ¨ SKILL.md å¼€å¤´æ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼š

```markdown
---
name: my-skill
description: [DEBUG] This skill does X. Use when Y.
---

# My Skill

[DEBUG] If you see this, the skill was loaded successfully.
```

#### **2. éªŒè¯è„šæœ¬æ‰§è¡Œ**

åœ¨è„šæœ¬ä¸­æ·»åŠ æ—¥å¿—ï¼š

```python
import sys

def main():
    print("[DEBUG] Script started", file=sys.stderr)

    # Your code here

    print("[DEBUG] Script completed", file=sys.stderr)
```

#### **3. æ£€æŸ¥è¾“å…¥/è¾“å‡ºæ ¼å¼**

```python
def main():
    try:
        input_data = json.loads(sys.stdin.read())
        print(f"[DEBUG] Received input: {input_data}", file=sys.stderr)

        # Process data
        result = process(input_data)

        print(f"[DEBUG] Generated output: {result}", file=sys.stderr)
        print(json.dumps(result))

    except Exception as e:
        print(f"[ERROR] {e}", file=sys.stderr)
        raise
```

#### **4. ä½¿ç”¨è¯¦ç»†æ¨¡å¼**

```python
response = client.beta.messages.create(
    # ... other parameters
    metadata={
        "user_id": "test_user",
        "debug": True
    }
)

# Print full response for debugging
print(json.dumps(response.model_dump(), indent=2))
```

### 9.3 å¸¸è§é—®é¢˜è¯Šæ–­

#### **é—®é¢˜ 1ï¼šSkill æ²¡æœ‰è¢«è§¦å‘**

**ç—‡çŠ¶**ï¼šClaude æ²¡æœ‰ä½¿ç”¨ä½ çš„ Skill

**å¯èƒ½åŸå› **ï¼š
- description ä¸å¤Ÿç²¾å‡†
- description ç¼ºå°‘å…³é”®è§¦å‘è¯
- ç”¨æˆ·è¯·æ±‚ä¸ description ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# æ”¹è¿› description
description: Calculate financial ratios (ROE, ROA, P/E, debt-to-equity, current ratio) from financial statements. Use when analyzing company performance, evaluating investments, or comparing financial metrics.
```

#### **é—®é¢˜ 2ï¼šè„šæœ¬æ‰§è¡Œå¤±è´¥**

**ç—‡çŠ¶**ï¼šè„šæœ¬æŠ¥é”™æˆ–æ²¡æœ‰è¾“å‡º

**å¯èƒ½åŸå› **ï¼š
- è·¯å¾„é”™è¯¯
- æƒé™é—®é¢˜
- ä¾èµ–ç¼ºå¤±
- è¾“å…¥æ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥è„šæœ¬æƒé™
chmod +x scripts/my_script.py

# æµ‹è¯•è„šæœ¬ç‹¬ç«‹è¿è¡Œ
echo '{"test": "data"}' | python scripts/my_script.py

# æ£€æŸ¥ä¾èµ–
pip list | grep required_package
```

#### **é—®é¢˜ 3ï¼šè¾“å‡ºæ ¼å¼ä¸æ­£ç¡®**

**ç—‡çŠ¶**ï¼šClaude æ— æ³•è§£æè„šæœ¬è¾“å‡º

**å¯èƒ½åŸå› **ï¼š
- è¾“å‡ºä¸æ˜¯æœ‰æ•ˆçš„ JSON
- æ··åˆäº† stdout å’Œ stderr
- åŒ…å«é¢å¤–çš„è°ƒè¯•ä¿¡æ¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# ç¡®ä¿åªè¾“å‡º JSON åˆ° stdout
result = {"key": "value"}
print(json.dumps(result))  # æ­£ç¡®

# è°ƒè¯•ä¿¡æ¯è¾“å‡ºåˆ° stderr
print("[DEBUG] Info", file=sys.stderr)  # æ­£ç¡®
```

### 9.4 æ€§èƒ½æµ‹è¯•

#### **æµ‹é‡ Token ä½¿ç”¨**

```python
def measure_token_usage(skill_path: str, test_messages: list):
    """Measure token usage across multiple test cases."""

    results = []

    for msg in test_messages:
        response = client.beta.messages.create(
            model="claude-sonnet-4-5-20250929",
            max_tokens=4096,
            container={"skills": [{"type": "local", "path": skill_path}]},
            messages=[{"role": "user", "content": msg}]
        )

        results.append({
            "message": msg,
            "input_tokens": response.usage.input_tokens,
            "output_tokens": response.usage.output_tokens,
            "total_tokens": response.usage.input_tokens + response.usage.output_tokens
        })

    # Print summary
    print("\nToken Usage Summary:")
    print(f"{'Message':<50} {'Input':<10} {'Output':<10} {'Total':<10}")
    print("-" * 80)
    for r in results:
        print(f"{r['message'][:47]+'...':<50} {r['input_tokens']:<10} {r['output_tokens']:<10} {r['total_tokens']:<10}")

    avg_total = sum(r['total_tokens'] for r in results) / len(results)
    print(f"\nAverage total tokens: {avg_total:.0f}")
```

#### **åŸºå‡†æµ‹è¯•**

```python
import time

def benchmark_skill(skill_path: str, iterations: int = 10):
    """Benchmark skill performance."""

    times = []

    for i in range(iterations):
        start = time.time()

        response = client.beta.messages.create(
            model="claude-sonnet-4-5-20250929",
            max_tokens=4096,
            container={"skills": [{"type": "local", "path": skill_path}]},
            messages=[{"role": "user", "content": "Test message"}]
        )

        elapsed = time.time() - start
        times.append(elapsed)
        print(f"Iteration {i+1}: {elapsed:.2f}s")

    print(f"\nAverage time: {sum(times)/len(times):.2f}s")
    print(f"Min time: {min(times):.2f}s")
    print(f"Max time: {max(times):.2f}s")
```

---

## 10. éƒ¨ç½²ä¸ä½¿ç”¨

### 10.1 æœ¬åœ°ä½¿ç”¨ï¼ˆLocal Skillsï¼‰

#### **ç›®å½•ç»“æ„**

```
my-project/
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ skill-1/
â”‚   â”‚   â””â”€â”€ SKILL.md
â”‚   â””â”€â”€ skill-2/
â”‚       â””â”€â”€ SKILL.md
â””â”€â”€ main.py
```

#### **API è°ƒç”¨**

```python
from anthropic import Anthropic

client = Anthropic(api_key="your-api-key")

response = client.beta.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=4096,
    betas=["code-execution-2025-08-25", "skills-2025-10-02"],
    container={
        "skills": [
            {
                "type": "local",
                "path": "skills/skill-1"
            },
            {
                "type": "local",
                "path": "skills/skill-2"
            }
        ]
    },
    tools=[{
        "type": "code_execution_20250825",
        "name": "code_execution"
    }],
    messages=[{
        "role": "user",
        "content": "Your request here"
    }]
)
```

### 10.2 ä½¿ç”¨ Anthropic å†…ç½® Skills

```python
response = client.beta.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=4096,
    betas=["code-execution-2025-08-25", "skills-2025-10-02"],
    container={
        "skills": [
            {"type": "anthropic", "skill_id": "xlsx", "version": "latest"},
            {"type": "anthropic", "skill_id": "pptx", "version": "latest"},
            {"type": "anthropic", "skill_id": "pdf", "version": "latest"},
            {"type": "anthropic", "skill_id": "docx", "version": "latest"}
        ]
    },
    tools=[{"type": "code_execution_20250825", "name": "code_execution"}],
    messages=[{"role": "user", "content": "Create an Excel report"}]
)
```

### 10.3 æ··åˆä½¿ç”¨ï¼ˆå†…ç½® + è‡ªå®šä¹‰ï¼‰

```python
response = client.beta.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=4096,
    container={
        "skills": [
            # Anthropic å†…ç½® Skills
            {"type": "anthropic", "skill_id": "xlsx", "version": "latest"},

            # ä½ çš„è‡ªå®šä¹‰ Skills
            {"type": "local", "path": "skills/financial-analysis"},
            {"type": "local", "path": "skills/brand-guidelines"}
        ]
    },
    tools=[{"type": "code_execution_20250825", "name": "code_execution"}],
    messages=[{
        "role": "user",
        "content": "Analyze this financial data and create a branded Excel report"
    }]
)
```

### 10.4 å¤„ç†ç”Ÿæˆçš„æ–‡ä»¶

å½“ Skills åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨ Files API ä¸‹è½½ï¼š

```python
def download_generated_files(response):
    """Download all files generated during skill execution."""

    file_ids = []

    # Extract file IDs from response
    for block in response.content:
        if block.type == "tool_result" and hasattr(block, 'output'):
            # Parse file_id from output
            output_str = str(block.output)
            if 'file_id' in output_str:
                # Extract file_id (format: file_abc123...)
                import re
                matches = re.findall(r'file_[a-zA-Z0-9]+', output_str)
                file_ids.extend(matches)

    # Download each file
    for file_id in file_ids:
        try:
            # Get file metadata
            metadata = client.beta.files.retrieve_metadata(file_id=file_id)
            filename = metadata.filename

            # Download file content
            content = client.beta.files.download(file_id=file_id)

            # Save to disk
            output_path = f"outputs/{filename}"
            with open(output_path, "wb") as f:
                f.write(content.read())

            print(f"âœ… Downloaded: {filename}")

        except Exception as e:
            print(f"âŒ Error downloading {file_id}: {e}")

    return file_ids


# Usage
response = client.beta.messages.create(...)
file_ids = download_generated_files(response)
```

### 10.5 ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ

#### **1. é”™è¯¯å¤„ç†**

```python
import time
from anthropic import APIError, RateLimitError

def call_with_retry(client, max_retries=3, **kwargs):
    """Call API with retry logic."""

    for attempt in range(max_retries):
        try:
            response = client.beta.messages.create(**kwargs)
            return response

        except RateLimitError as e:
            if attempt < max_retries - 1:
                wait_time = 2 ** attempt  # Exponential backoff
                print(f"Rate limited. Waiting {wait_time}s...")
                time.sleep(wait_time)
            else:
                raise

        except APIError as e:
            print(f"API Error: {e}")
            raise

        except Exception as e:
            print(f"Unexpected error: {e}")
            raise
```

#### **2. æ—¥å¿—è®°å½•**

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('skill_usage.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

def log_skill_usage(response, user_message):
    """Log skill usage for monitoring."""

    logger.info(f"User message: {user_message[:100]}...")
    logger.info(f"Model: {response.model}")
    logger.info(f"Tokens: {response.usage.input_tokens} in, {response.usage.output_tokens} out")

    # Log which skills were used
    for block in response.content:
        if block.type == "tool_use":
            logger.info(f"Tool used: {block.name}")
```

#### **3. æˆæœ¬ç›‘æ§**

```python
def calculate_cost(response, model="claude-sonnet-4-5-20250929"):
    """Calculate API call cost."""

    # Pricing (as of 2025, check current pricing)
    pricing = {
        "claude-haiku-4-20250514": {"input": 0.25, "output": 1.25},  # per 1M tokens
        "claude-sonnet-4-5-20250929": {"input": 3.00, "output": 15.00},
        "claude-opus-4-20250514": {"input": 15.00, "output": 75.00}
    }

    if model not in pricing:
        return None

    input_cost = (response.usage.input_tokens / 1_000_000) * pricing[model]["input"]
    output_cost = (response.usage.output_tokens / 1_000_000) * pricing[model]["output"]
    total_cost = input_cost + output_cost

    return {
        "input_cost": input_cost,
        "output_cost": output_cost,
        "total_cost": total_cost,
        "currency": "USD"
    }
```

---

## 11. å®Œæ•´ç¤ºä¾‹

### 11.1 ç¤ºä¾‹ï¼šè´¢åŠ¡æ¯”ç‡åˆ†æ Skill

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„è´¢åŠ¡æ¯”ç‡åˆ†æ Skillã€‚

#### **ç›®å½•ç»“æ„**

```
skills/financial-ratio-analyzer/
â”œâ”€â”€ SKILL.md
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ calculate_ratios.py
â”‚   â””â”€â”€ interpret_ratios.py
â””â”€â”€ reference/
    â”œâ”€â”€ FORMULAS.md
    â””â”€â”€ BENCHMARKS.md
```

#### **SKILL.md**

```markdown
---
name: financial-ratio-analyzer
description: Calculate and interpret financial ratios (ROE, ROA, P/E, debt-to-equity, current ratio, quick ratio) from financial statements. Use when analyzing company performance, evaluating investments, or comparing financial metrics across companies.
---

# Financial Ratio Analyzer

Comprehensive financial ratio analysis for investment decisions and company performance evaluation.

## Capabilities

- **Profitability Ratios**: ROE, ROA, Gross Margin, Operating Margin, Net Margin
- **Liquidity Ratios**: Current Ratio, Quick Ratio, Cash Ratio
- **Leverage Ratios**: Debt-to-Equity, Interest Coverage
- **Valuation Ratios**: P/E, P/B, P/S, EV/EBITDA
- **Efficiency Ratios**: Asset Turnover, Inventory Turnover

## Quick Start

### Basic Calculation

Provide financial data and specify which ratios to calculate:

```python
python scripts/calculate_ratios.py
```

Input via stdin as JSON:
```json
{
  "net_income": 1000000,
  "shareholders_equity": 5000000,
  "total_assets": 8000000,
  "revenue": 10000000
}
```

### Interpretation

For detailed interpretation and industry benchmarks:

```python
python scripts/interpret_ratios.py
```

## Input Format

Provide financial data as JSON with relevant fields:

```json
{
  "company_name": "Example Corp",
  "fiscal_year": 2023,
  "net_income": 1000000,
  "revenue": 10000000,
  "total_assets": 8000000,
  "shareholders_equity": 5000000,
  "current_assets": 3000000,
  "current_liabilities": 1500000,
  "total_debt": 2000000,
  "stock_price": 50.00,
  "shares_outstanding": 1000000
}
```

## Output Format

Results include calculated ratios with interpretations:

```json
{
  "company": "Example Corp",
  "fiscal_year": 2023,
  "ratios": {
    "profitability": {
      "roe": 0.20,
      "roe_percentage": "20.0%",
      "roa": 0.125,
      "roa_percentage": "12.5%",
      "net_margin": 0.10,
      "net_margin_percentage": "10.0%"
    },
    "liquidity": {
      "current_ratio": 2.0,
      "quick_ratio": 1.5
    },
    "leverage": {
      "debt_to_equity": 0.4
    },
    "valuation": {
      "pe_ratio": 50.0,
      "market_cap": 50000000
    }
  },
  "interpretation": {
    "roe": "Strong profitability - company generates $0.20 profit per $1 of equity",
    "current_ratio": "Healthy liquidity - company can cover short-term obligations"
  }
}
```

## Example Usage

"Calculate ROE for Apple if net income is $100B and shareholders' equity is $60B"

"Analyze the liquidity position of a company with current assets of $5M and current liabilities of $3M"

"Compare P/E ratios of tech companies: Apple (P/E 30), Microsoft (P/E 35), Google (P/E 25)"

## Scripts

- `calculate_ratios.py`: Core calculation engine for all financial ratios
- `interpret_ratios.py`: Provides interpretation and industry benchmarking

## Reference

- [FORMULAS.md](reference/FORMULAS.md): Detailed formulas and calculation methods
- [BENCHMARKS.md](reference/BENCHMARKS.md): Industry benchmark data

## Best Practices

1. Validate data completeness before calculations
2. Handle missing values appropriately
3. Consider industry context when interpreting ratios
4. Include period comparisons for trend analysis
5. Flag unusual or concerning ratios

## Limitations

- Requires accurate financial data
- Industry benchmarks are general guidelines
- Some ratios may not apply to all industries
- Historical data doesn't guarantee future performance
```

#### **scripts/calculate_ratios.py**

```python
#!/usr/bin/env python3
"""
Financial Ratio Calculator
Calculates key financial ratios from financial statement data
"""

import sys
import json
from typing import Dict, Any, Optional


def calculate_roe(net_income: float, shareholders_equity: float) -> float:
    """Calculate Return on Equity (ROE)."""
    if shareholders_equity <= 0:
        raise ValueError("Shareholders' equity must be positive")
    return net_income / shareholders_equity


def calculate_roa(net_income: float, total_assets: float) -> float:
    """Calculate Return on Assets (ROA)."""
    if total_assets <= 0:
        raise ValueError("Total assets must be positive")
    return net_income / total_assets


def calculate_net_margin(net_income: float, revenue: float) -> float:
    """Calculate Net Profit Margin."""
    if revenue <= 0:
        raise ValueError("Revenue must be positive")
    return net_income / revenue


def calculate_current_ratio(current_assets: float, current_liabilities: float) -> float:
    """Calculate Current Ratio."""
    if current_liabilities <= 0:
        raise ValueError("Current liabilities must be positive")
    return current_assets / current_liabilities


def calculate_debt_to_equity(total_debt: float, shareholders_equity: float) -> float:
    """Calculate Debt-to-Equity Ratio."""
    if shareholders_equity <= 0:
        raise ValueError("Shareholders' equity must be positive")
    return total_debt / shareholders_equity


def calculate_pe_ratio(stock_price: float, eps: float) -> float:
    """Calculate Price-to-Earnings Ratio."""
    if eps <= 0:
        raise ValueError("EPS must be positive")
    return stock_price / eps


def main():
    """Main execution function."""
    try:
        # Read input from stdin
        input_data = json.loads(sys.stdin.read())

        # Initialize results
        results = {
            "company": input_data.get("company_name", "Unknown"),
            "fiscal_year": input_data.get("fiscal_year"),
            "ratios": {},
            "status": "success"
        }

        # Calculate profitability ratios
        if "net_income" in input_data and "shareholders_equity" in input_data:
            roe = calculate_roe(input_data["net_income"], input_data["shareholders_equity"])
            results["ratios"]["roe"] = round(roe, 4)
            results["ratios"]["roe_percentage"] = f"{round(roe * 100, 2)}%"

        if "net_income" in input_data and "total_assets" in input_data:
            roa = calculate_roa(input_data["net_income"], input_data["total_assets"])
            results["ratios"]["roa"] = round(roa, 4)
            results["ratios"]["roa_percentage"] = f"{round(roa * 100, 2)}%"

        if "net_income" in input_data and "revenue" in input_data:
            net_margin = calculate_net_margin(input_data["net_income"], input_data["revenue"])
            results["ratios"]["net_margin"] = round(net_margin, 4)
            results["ratios"]["net_margin_percentage"] = f"{round(net_margin * 100, 2)}%"

        # Calculate liquidity ratios
        if "current_assets" in input_data and "current_liabilities" in input_data:
            current_ratio = calculate_current_ratio(
                input_data["current_assets"],
                input_data["current_liabilities"]
            )
            results["ratios"]["current_ratio"] = round(current_ratio, 2)

        # Calculate leverage ratios
        if "total_debt" in input_data and "shareholders_equity" in input_data:
            debt_to_equity = calculate_debt_to_equity(
                input_data["total_debt"],
                input_data["shareholders_equity"]
            )
            results["ratios"]["debt_to_equity"] = round(debt_to_equity, 2)

        # Calculate valuation ratios
        if "stock_price" in input_data and "shares_outstanding" in input_data:
            if "net_income" in input_data:
                eps = input_data["net_income"] / input_data["shares_outstanding"]
                pe_ratio = calculate_pe_ratio(input_data["stock_price"], eps)
                results["ratios"]["pe_ratio"] = round(pe_ratio, 2)
                results["ratios"]["eps"] = round(eps, 2)

            market_cap = input_data["stock_price"] * input_data["shares_outstanding"]
            results["ratios"]["market_cap"] = market_cap

        # Output results
        print(json.dumps(results, indent=2))

    except ValueError as e:
        error_result = {
            "status": "error",
            "error_type": "ValueError",
            "message": str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)

    except Exception as e:
        error_result = {
            "status": "error",
            "error_type": type(e).__name__,
            "message": str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)


if __name__ == "__main__":
    main()
```

#### **reference/FORMULAS.md**

```markdown
# Financial Ratio Formulas

## Profitability Ratios

### Return on Equity (ROE)
**Formula**: Net Income / Shareholders' Equity

**Interpretation**: Measures how much profit a company generates with shareholders' equity.

**Industry Benchmarks**:
- Technology: 15-25%
- Retail: 10-15%
- Utilities: 8-12%
- Banking: 10-15%

### Return on Assets (ROA)
**Formula**: Net Income / Total Assets

**Interpretation**: Measures how efficiently a company uses its assets to generate profit.

**Industry Benchmarks**:
- Technology: 8-15%
- Manufacturing: 5-10%
- Retail: 5-8%

### Net Profit Margin
**Formula**: Net Income / Revenue

**Interpretation**: Shows what percentage of revenue becomes profit.

**Industry Benchmarks**:
- Software: 15-25%
- Retail: 2-5%
- Healthcare: 5-10%

## Liquidity Ratios

### Current Ratio
**Formula**: Current Assets / Current Liabilities

**Interpretation**: Measures ability to pay short-term obligations.

**Benchmarks**:
- Healthy: > 1.5
- Acceptable: 1.0-1.5
- Concerning: < 1.0

### Quick Ratio (Acid Test)
**Formula**: (Current Assets - Inventory) / Current Liabilities

**Interpretation**: More conservative liquidity measure excluding inventory.

**Benchmarks**:
- Healthy: > 1.0
- Acceptable: 0.7-1.0
- Concerning: < 0.7

## Leverage Ratios

### Debt-to-Equity Ratio
**Formula**: Total Debt / Shareholders' Equity

**Interpretation**: Measures financial leverage and risk.

**Benchmarks**:
- Conservative: < 0.5
- Moderate: 0.5-1.5
- Aggressive: > 1.5

## Valuation Ratios

### Price-to-Earnings (P/E) Ratio
**Formula**: Stock Price / Earnings Per Share

**Interpretation**: Shows how much investors pay for $1 of earnings.

**Benchmarks**:
- Value stocks: 10-15
- Market average: 15-20
- Growth stocks: 20-30+
```

### 11.2 æµ‹è¯•ç¤ºä¾‹ Skill

```python
#!/usr/bin/env python3
"""Test the financial ratio analyzer skill"""

import os
from anthropic import Anthropic
from dotenv import load_dotenv

load_dotenv()
client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))

# Test data
test_message = """
Calculate financial ratios for this company:
- Net Income: $5,000,000
- Revenue: $50,000,000
- Total Assets: $40,000,000
- Shareholders' Equity: $25,000,000
- Current Assets: $15,000,000
- Current Liabilities: $8,000,000
- Total Debt: $10,000,000
- Stock Price: $75
- Shares Outstanding: 2,000,000

Provide interpretation of the results.
"""

response = client.beta.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=4096,
    betas=["code-execution-2025-08-25", "skills-2025-10-02"],
    container={
        "skills": [{
            "type": "local",
            "path": "skills/financial-ratio-analyzer"
        }]
    },
    tools=[{
        "type": "code_execution_20250825",
        "name": "code_execution"
    }],
    messages=[{
        "role": "user",
        "content": test_message
    }]
)

# Print response
for block in response.content:
    if hasattr(block, 'text'):
        print(block.text)

print(f"\nTokens: {response.usage.input_tokens} in, {response.usage.output_tokens} out")
```

---

## 12. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 12.1 FAQ

#### **Q1: Skill çš„ name å’Œ description æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

**A**:
- **name**: ç”¨äºæ ‡è¯† Skillï¼Œå¿…é¡»æ˜¯å”¯ä¸€çš„æ–‡ä»¶ç³»ç»Ÿå‹å¥½åç§°ï¼ˆå°å†™+è¿å­—ç¬¦ï¼‰
- **description**: ç”¨äºåŒ¹é…ç”¨æˆ·è¯·æ±‚ï¼Œåº”è¯¥åŒ…å«è§¦å‘è¯å’Œä½¿ç”¨åœºæ™¯

#### **Q2: SKILL.md åº”è¯¥å¤šé•¿ï¼Ÿ**

**A**: å»ºè®®ä¿æŒåœ¨ 500 è¡Œä»¥å†…ã€‚å¦‚æœå†…å®¹æ›´å¤šï¼Œå°†è¯¦ç»†æ–‡æ¡£ç§»åˆ° `reference/` æ–‡ä»¶å¤¹ã€‚

#### **Q3: è„šæœ¬å¿…é¡»ä½¿ç”¨ Python å—ï¼Ÿ**

**A**: ä¸æ˜¯ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å¯æ‰§è¡Œçš„è„šæœ¬ï¼ˆPythonã€JavaScriptã€Bash ç­‰ï¼‰ï¼Œåªè¦å®ƒèƒ½åœ¨ä»£ç æ‰§è¡Œç¯å¢ƒä¸­è¿è¡Œã€‚

#### **Q4: å¦‚ä½•åœ¨å¤šä¸ª Skills ä¹‹é—´å…±äº«ä»£ç ï¼Ÿ**

**A**: å¯ä»¥åˆ›å»ºä¸€ä¸ªå…±äº«çš„å·¥å…·åº“ï¼š

```
skills/
â”œâ”€â”€ _shared/
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ skill-1/
â”‚   â””â”€â”€ SKILL.md
â””â”€â”€ skill-2/
    â””â”€â”€ SKILL.md
```

åœ¨è„šæœ¬ä¸­å¼•ç”¨ï¼š
```python
import sys
sys.path.append('../_shared')
from utils import shared_function
```

#### **Q5: Skills å¯ä»¥è®¿é—®ç½‘ç»œå—ï¼Ÿ**

**A**:
- **claude.ai**: å¯ä»¥å®‰è£…åŒ…ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®ç½‘ç»œ
- **API**: è¿è¡Œæ—¶æ— ç½‘ç»œè®¿é—®ï¼Œæ— æ³•å®‰è£…åŒ…

#### **Q6: å¦‚ä½•å¤„ç†æ•æ„Ÿä¿¡æ¯ï¼Ÿ**

**A**:
- ä¸è¦åœ¨ SKILL.md ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶
- åœ¨ reference/ ä¸­æä¾›é…ç½®æ¨¡æ¿

```python
# åœ¨è„šæœ¬ä¸­
import os
api_key = os.getenv("API_KEY")
```

#### **Q7: Skills å¯ä»¥è°ƒç”¨å…¶ä»– Skills å—ï¼Ÿ**

**A**: Skills ä¸èƒ½ç›´æ¥è°ƒç”¨å…¶ä»– Skillsï¼Œä½† Claude å¯ä»¥æ ¹æ®éœ€è¦è‡ªåŠ¨åŠ è½½å’Œä½¿ç”¨å¤šä¸ª Skillsã€‚

#### **Q8: å¦‚ä½•æ›´æ–°å·²éƒ¨ç½²çš„ Skillï¼Ÿ**

**A**:
- æœ¬åœ° Skills: ç›´æ¥ä¿®æ”¹æ–‡ä»¶å³å¯
- ç‰ˆæœ¬æ§åˆ¶: ä½¿ç”¨ Git ç®¡ç† Skill ç‰ˆæœ¬
- æµ‹è¯•: æ›´æ–°ååŠ¡å¿…é‡æ–°æµ‹è¯•

### 12.2 æ•…éšœæ’é™¤æ¸…å•

#### **Skill ä¸å·¥ä½œæ—¶çš„æ£€æŸ¥æ­¥éª¤**

- [ ] æ£€æŸ¥ YAML frontmatter æ ¼å¼æ˜¯å¦æ­£ç¡®
- [ ] éªŒè¯ name å­—æ®µç¬¦åˆå‘½åè§„èŒƒ
- [ ] ç¡®è®¤ description åŒ…å«ç›¸å…³è§¦å‘è¯
- [ ] æµ‹è¯•è„šæœ¬å¯ä»¥ç‹¬ç«‹è¿è¡Œ
- [ ] æ£€æŸ¥æ–‡ä»¶è·¯å¾„ä½¿ç”¨æ­£æ–œæ  `/`
- [ ] éªŒè¯ JSON è¾“å…¥/è¾“å‡ºæ ¼å¼
- [ ] æŸ¥çœ‹é”™è¯¯æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
- [ ] åœ¨ä¸åŒæ¨¡å‹ä¸Šæµ‹è¯•

### 12.3 æ€§èƒ½ä¼˜åŒ–æ¸…å•

- [ ] description ç²¾å‡†ï¼Œé¿å…è¿‡åº¦è§¦å‘
- [ ] SKILL.md ä¿æŒç®€æ´ï¼ˆ< 500 è¡Œï¼‰
- [ ] è¯¦ç»†æ–‡æ¡£ç§»åˆ° reference/
- [ ] ä½¿ç”¨è„šæœ¬å¤„ç†ç¡®å®šæ€§ä»»åŠ¡
- [ ] é¿å…é‡å¤ç”Ÿæˆç›¸åŒä»£ç 
- [ ] æµ‹é‡å¹¶ä¼˜åŒ– token ä½¿ç”¨
- [ ] ä½¿ç”¨é€‚å½“çš„æ¨¡å‹ï¼ˆHaiku/Sonnet/Opusï¼‰

---

## 13. æ€»ç»“ä¸ä¸‹ä¸€æ­¥

### 13.1 å…³é”®è¦ç‚¹å›é¡¾

âœ… **Skills çš„æœ¬è´¨**: æ ‡å‡†åŒ–çš„èƒ½åŠ›åŒ…ï¼Œå°è£…ä¸“å®¶çŸ¥è¯†

âœ… **ä¸‰å±‚ç»“æ„**: SOP (SKILL.md) + å·¥å…· (scripts/) + èµ„æº (reference/)

âœ… **æ¸è¿›å¼æŠ«éœ²**: åªåœ¨éœ€è¦æ—¶åŠ è½½å†…å®¹ï¼Œä¼˜åŒ– token ä½¿ç”¨

âœ… **æ ¸å¿ƒåŸåˆ™**: ç®€æ´ã€ç²¾å‡†ã€é€‚åº¦ã€æµ‹è¯•ã€ç»“æ„åŒ–ã€è¿­ä»£

âœ… **æœ€ä½³å®è·µ**:
- åªæ•™ Claude ä¸çŸ¥é“çš„
- ä½¿ç”¨å…·ä½“ç¤ºä¾‹
- æä¾›æ¸…æ™°çš„å·¥ä½œæµ
- å®Œå–„çš„é”™è¯¯å¤„ç†
- å…¨æ¨¡å‹æµ‹è¯•

### 13.2 å¼€å‘æµç¨‹æ€»ç»“

```mermaid
graph TD
    A[ç¡®å®šéœ€æ±‚] --> B[è®¾è®¡ Skill ç»“æ„]
    B --> C[ç¼–å†™ SKILL.md]
    C --> D[å¼€å‘è„šæœ¬]
    D --> E[ç»„ç»‡èµ„æº]
    E --> F[æœ¬åœ°æµ‹è¯•]
    F --> G{æµ‹è¯•é€šè¿‡?}
    G -->|å¦| H[è°ƒè¯•ä¼˜åŒ–]
    H --> F
    G -->|æ˜¯| I[å¤šæ¨¡å‹æµ‹è¯•]
    I --> J[æ€§èƒ½ä¼˜åŒ–]
    J --> K[éƒ¨ç½²ä½¿ç”¨]
    K --> L[æŒç»­è¿­ä»£]
```

### 13.3 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å¼€å§‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Skill**
   - é€‰æ‹©ä¸€ä¸ªä½ ç†Ÿæ‚‰çš„é¢†åŸŸ
   - ä»ç®€å•çš„ Skill å¼€å§‹
   - ä½¿ç”¨æœ¬æŒ‡å—çš„æ¨¡æ¿

2. **å­¦ä¹ å®˜æ–¹ç¤ºä¾‹**
   - ç ”ç©¶ claude-cookbooks ä¸­çš„ç¤ºä¾‹
   - åˆ†æå†…ç½® Skills çš„è®¾è®¡
   - å‚è€ƒæœ€ä½³å®è·µ

3. **åŠ å…¥ç¤¾åŒº**
   - åˆ†äº«ä½ çš„ Skills
   - å­¦ä¹ ä»–äººçš„ç»éªŒ
   - è´¡çŒ®æ”¹è¿›å»ºè®®

### 13.4 å‚è€ƒèµ„æº

#### **å®˜æ–¹æ–‡æ¡£**
- [Skills Overview](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview)
- [Best Practices](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices)
- [Quickstart Guide](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/quickstart)

#### **ä»£ç ç¤ºä¾‹**
- [Claude Cookbooks - Skills](https://github.com/anthropics/claude-cookbooks/tree/main/skills)

#### **æ”¯æŒæ–‡ç« **
- [Teach Claude your way of working using Skills](https://support.claude.com/en/articles/12580051)
- [How to create a skill with Claude](https://support.claude.com/en/articles/12599426)

---

## é™„å½•

### A. SKILL.md æ¨¡æ¿

```markdown
---
name: your-skill-name
description: Brief description of what this skill does and when to use it. Include key trigger words.
---

# Skill Title

Brief overview (1-2 sentences).

## Capabilities

- Capability 1
- Capability 2
- Capability 3

## How to Use

1. Step 1
2. Step 2
3. Step 3

## Input Format

Describe expected input format.

## Output Format

Describe output format.

## Example Usage

"Example request 1"
"Example request 2"

## Scripts

- `script1.py`: Description
- `script2.py`: Description

## Reference

- [GUIDE.md](reference/GUIDE.md): Detailed guide

## Best Practices

1. Practice 1
2. Practice 2

## Limitations

- Limitation 1
- Limitation 2
```

### B. Python è„šæœ¬æ¨¡æ¿

```python
#!/usr/bin/env python3
"""
Script description
"""

import sys
import json
from typing import Dict, Any


def main():
    """Main execution function."""
    try:
        # Read input
        input_data = json.loads(sys.stdin.read())

        # Validate input
        # ... validation code ...

        # Process data
        result = process(input_data)

        # Output result
        print(json.dumps(result, indent=2))

    except ValueError as e:
        error_result = {
            "status": "error",
            "error_type": "ValueError",
            "message": str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)

    except Exception as e:
        error_result = {
            "status": "error",
            "error_type": type(e).__name__,
            "message": str(e)
        }
        print(json.dumps(error_result, indent=2), file=sys.stderr)
        sys.exit(1)


def process(data: Dict[str, Any]) -> Dict[str, Any]:
    """Process input data and return result."""
    # Your processing logic here
    return {"status": "success", "result": data}


if __name__ == "__main__":
    main()
```

### C. æµ‹è¯•è„šæœ¬æ¨¡æ¿

```python
#!/usr/bin/env python3
"""Test script for Skills"""

import os
from anthropic import Anthropic
from dotenv import load_dotenv

load_dotenv()
client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))

def test_skill(skill_path: str, message: str):
    """Test a skill with a message."""
    response = client.beta.messages.create(
        model="claude-sonnet-4-5-20250929",
        max_tokens=4096,
        betas=["code-execution-2025-08-25", "skills-2025-10-02"],
        container={
            "skills": [{"type": "local", "path": skill_path}]
        },
        tools=[{"type": "code_execution_20250825", "name": "code_execution"}],
        messages=[{"role": "user", "content": message}]
    )

    for block in response.content:
        if hasattr(block, 'text'):
            print(block.text)

    print(f"\nTokens: {response.usage.input_tokens} in, {response.usage.output_tokens} out")

if __name__ == "__main__":
    test_skill("skills/your-skill", "Your test message")
```

---

**ğŸ‰ æ­å–œï¼ä½ ç°åœ¨å·²ç»æŒæ¡äº† Claude Skills å¼€å‘çš„å®Œæ•´çŸ¥è¯†ï¼**

å¼€å§‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Skillï¼Œè®© Claude æˆä¸ºä½ é¢†åŸŸçš„ä¸“å®¶ï¼

#### **è¿è¡Œæµ‹è¯•**

```bash
# å•ä¸ªæµ‹è¯•
python test_skill.py

# ä½¿ç”¨ä¸åŒæ¨¡å‹æµ‹è¯•
python test_skill.py --model claude-haiku-4-20250514
python test_skill.py --model claude-sonnet-4-5-20250929
python test_skill.py --model claude-opus-4-20250514
```


